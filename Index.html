<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Momentum</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

:root{
  --bg:#f5f7fb;
  --card:#ffffff;
  --radius:18px;
  --shadow:0 4px 18px rgba(0,0,0,0.06);
  --blue:#0b69ff;
  --text:#111;
  --text-light:#667085;
  --border:#e5e7eb;
  --nav-inactive:#9ca3af;
}

*{
  margin:0;padding:0;box-sizing:border-box;
  font-family:-apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
}

html,body{
  background:var(--bg);
  height:100%;
  overflow-x:hidden;
}

/* TOP BAR */
.topbar{
  position:sticky;
  top:0;
  z-index:50;
  background:var(--bg);
  padding:14px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid var(--border);
}

.top-left{
  display:flex;
  align-items:center;
  gap:10px;
}

.logo{
  background:var(--blue);
  color:#fff;
  width:36px;height:36px;
  border-radius:12px;
  display:flex;justify-content:center;
  align-items:center;
  font-weight:700;
  font-size:18px;
}

.app-title{
  font-weight:700;
  font-size:18px;
  color:var(--text);
}

.app-sub{
  font-size:12px;
  color:var(--text-light);
}

.top-btn{
  padding:6px 14px;
  border:none;
  background:var(--card);
  border-radius:12px;
  box-shadow:var(--shadow);
  font-size:14px;
}

.top-right{
  display:flex;
  gap:10px;
}

/* PAGE LAYOUT */
.page{
  padding:16px;
  padding-bottom:100px;
}

.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:20px;
  box-shadow:var(--shadow);
}

/* SUMMARY */
.summary-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.small-label{
  font-size:13px;
  color:var(--text-light);
}

.big-time{
  font-weight:700;
  font-size:26px;
  color:var(--text);
}

.categories-row{
  margin-top:14px;
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.category-badge{
  background:#fff;
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:10px 14px;
  text-align:center;
  min-width:90px;
}

.cat-label{
  font-size:13px;
  color:var(--text-light);
}

.cat-time{
  font-size:15px;
  margin-top:4px;
  font-weight:600;
  color:var(--text);
}

/* CHARTS */
.chart-header{
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
}

.chart-title{
  font-weight:600;
  color:var(--text);
}

.chart-action{
  font-size:13px;
  color:var(--text-light);
}

.chart-date{
  font-size:13px;
  color:var(--text-light);
}

.donut-wrapper{
  width:100%;
  max-width:260px;
  margin:auto;
  position:relative;
}

#donutChart{
  width:100%!important;
  height:auto!important;
}

.donut-center{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-weight:700;
  font-size:22px;
}

.donut-legend{
  margin-top:14px;
  display:flex;
  flex-direction:column;
  gap:8px;
  font-size:14px;
}

#lineChart{
  width:100%!important;
  height:auto!important;
}

/* RECENT */
.recent-title{
  font-weight:600;
  margin-bottom:10px;
}

.recent-item{
  padding:8px 0;
  font-size:14px;
  color:var(--text-light);
  border-bottom:1px solid var(--border);
}

/* TIMERS */
.timers-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
}

.timers-title{
  font-weight:700;
  font-size:18px;
}

.add-btn{
  background:var(--blue);
  color:#fff;
  border:none;
  padding:8px 14px;
  border-radius:12px;
}

.clear-btn{
  margin-top:16px;
  padding:12px;
  background:#eee;
  border:none;
  border-radius:12px;
  width:100%;
}

.timer-item{
  background:#fff;
  border:1px solid var(--border);
  padding:14px;
  border-radius:var(--radius);
  margin-bottom:14px;
}

.timer-title{
  font-weight:600;
  margin-bottom:4px;
}

.timer-goal{
  font-size:13px;
  color:var(--text-light);
  margin-bottom:10px;
}

.timer-row{
  display:flex;
  gap:6px;
}

.timer-btn{
  flex:1;
  padding:10px;
  border:none;
  border-radius:10px;
  background:#f3f4f6;
  font-size:14px;
}

.timer-btn.start{
  background:var(--blue);
  color:#fff;
}

/* NOTES */
.notes-date{
  font-weight:700;
  font-size:18px;
  margin-bottom:10px;
}

.notes-input{
  width:100%;
  height:110px;
  padding:12px;
  border-radius:14px;
  border:none;
  background:#f3f4f6;
  resize:none;
  font-size:15px;
}

.save-btn{
  width:100%;
  margin-top:12px;
  padding:12px;
  border:none;
  background:var(--blue);
  color:#fff;
  border-radius:14px;
  font-size:16px;
}

.history-title{
  font-weight:700;
  margin-bottom:10px;
}

.history-entry{
  background:#fff;
  border:1px solid var(--border);
  padding:12px;
  border-radius:14px;
  margin-bottom:12px;
}

.history-date{
  font-weight:600;
  margin-bottom:4px;
}

.history-text{
  font-size:14px;
  color:var(--text-light);
}

/* FOOTER */
.footer-info{
  text-align:center;
  font-size:13px;
  color:var(--text-light);
  margin-top:10px;
}

/* NAV BAR */
.bottom-nav{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:78px;
  background:#fff;
  border-top:1px solid var(--border);
  display:flex;
  justify-content:space-around;
  align-items:center;
  z-index:100;
}

.nav-btn{
  background:none;
  border:none;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
  color:var(--nav-inactive);
}

.nav-active{
  color:var(--blue)!important;
}

.nav-icon-wrap{
  width:26px;
  height:26px;
}

.nav-icon{
  width:100%;
  height:100%;
  stroke:currentColor;
  fill:none;
}

  </style>
  <body>

  <!-- HEADER -->
  <header class="topbar">
    <div class="top-left">
      <div class="logo">M</div>
      <div>
        <div class="app-title">Momentum</div>
        <div class="app-sub">Reports • Timers • Notes</div>
      </div>
    </div>

    <div class="top-right">
      <button id="exportBtn" class="top-btn">Export</button>
      <button id="importBtn" class="top-btn">Import</button>
      <input id="importInput" type="file" accept="application/json" style="display:none;">
    </div>
  </header>


  <!-- HOME PAGE -->
  <main id="page-home" class="page">

    <section class="card summary-card">
      <div class="summary-row">
        <div>
          <div class="small-label">Today’s total</div>
          <div id="todayTotal" class="big-time">0m</div>
        </div>
        <div class="streak-box">
          <div class="small-label">Streak</div>
          <div id="streakCount" class="big-time">0d</div>
        </div>
      </div>

      <div class="categories-row">
        <div class="category-badge">
          <div class="cat-label">Study</div>
          <div id="studyTotal" class="cat-time">0m</div>
        </div>
        <div class="category-badge">
          <div class="cat-label">Project</div>
          <div id="projectTotal" class="cat-time">0m</div>
        </div>
        <div class="category-badge">
          <div class="cat-label">Workout</div>
          <div id="workoutTotal" class="cat-time">0m</div>
        </div>
        <div class="category-badge">
          <div class="cat-label">Social</div>
          <div id="socialTotal" class="cat-time">0m</div>
        </div>
      </div>
    </section>


    <!-- DONUT CHART -->
    <section class="card chart-block">
      <div class="chart-header">
        <span class="chart-title">Daily Distribution</span>
        <span class="chart-action">Breakdown</span>
      </div>

      <div class="donut-wrapper">
        <canvas id="donutChart"></canvas>
        <div id="donutCenter" class="donut-center">0h</div>
      </div>

      <div id="donutLegend" class="donut-legend"></div>
    </section>


    <!-- LINE CHART -->
    <section class="card chart-block">
      <div class="chart-header">
        <span class="chart-title">Weekly Trend</span>
        <span class="chart-date" id="trendDateRange"></span>
      </div>

      <canvas id="lineChart"></canvas>
    </section>


    <!-- RECENT SESSIONS -->
    <section class="card recent-card">
      <div class="recent-title">Recent sessions</div>
      <div id="recentSessions" class="recent-list"></div>
    </section>


    <div class="footer-info">Offline • Single file • LocalStorage</div>
  </main>



  <!-- TIMERS PAGE -->
  <main id="page-timers" class="page" style="display:none;">

    <section class="card timers-card">
      <div class="timers-header">
        <div class="timers-title">Daily Timers</div>
        <button id="addCategoryBtn" class="add-btn">+ Add</button>
      </div>

      <div id="timersList"></div>

      <button id="clearTodayBtn" class="clear-btn">Clear Today</button>
    </section>

    <div class="footer-info">Offline • Single file • LocalStorage</div>

  </main>



  <!-- NOTES PAGE -->
  <main id="page-notes" class="page" style="display:none;">

    <section class="card notes-card">
      <div class="notes-date" id="notesTodayHeader"></div>

      <textarea id="notesInput" class="notes-input"
        placeholder="What did you achieve today?"></textarea>

      <button id="saveNotesBtn" class="save-btn">Save</button>
    </section>


    <section class="card notes-history-card">
      <div class="history-title">Previous Notes</div>
      <div id="notesHistory"></div>
    </section>

    <div class="footer-info">Offline • Single file • LocalStorage</div>

  </main>



  <!-- BOTTOM NAV -->
  <nav class="bottom-nav">

    <button class="nav-btn nav-active" data-page="page-home">
      <div class="nav-icon-wrap">
        <svg viewBox="0 0 24 24" class="nav-icon">
          <path d="M12 3L3 10h3v8h12v-8h3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <span>Home</span>
    </button>

    <button class="nav-btn" data-page="page-timers">
      <div class="nav-icon-wrap">
        <svg viewBox="0 0 24 24" class="nav-icon">
          <circle cx="12" cy="12" r="8" stroke-width="2"/>
          <path d="M12 8v4l3 2" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <span>Timers</span>
    </button>

    <button class="nav-btn" data-page="page-notes">
      <div class="nav-icon-wrap">
        <svg viewBox="0 0 24 24" class="nav-icon">
          <path d="M4 4h16v14H4z" stroke-width="2"/>
          <path d="M8 8h8M8 12h5" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <span>Notes</span>
    </button>

  </nav>
    <script>
document.addEventListener("DOMContentLoaded", () => {

    /* -----------------------------------
       STATE + LOCAL STORAGE
    ----------------------------------- */
    let data = JSON.parse(localStorage.getItem("momentum-data") || "{}");

    const defaultState = {
        sessions: [],
        notes: {},
        goals: {
            study: 6 * 60 * 60,
            project: 4 * 60 * 60,
            workout: 1 * 60 * 60,
            social: 30 * 60
        },
        timers: {
            study: null,
            project: null,
            workout: null,
            social: null
        }
    };

    data = { ...defaultState, ...data };

    function saveData() {
        localStorage.setItem("momentum-data", JSON.stringify(data));
    }

    /* -----------------------------------
       TIME HELPERS
    ----------------------------------- */
    function secondsToHMS(sec) {
        const h = Math.floor(sec / 3600);
        const m = Math.floor((sec % 3600) / 60);
        return `${h}h ${m}m`;
    }

    function secondsToShort(sec) {
        const h = Math.floor(sec / 3600);
        const m = Math.floor((sec % 3600) / 60);
        return `${h}h ${m}m`;
    }

    function todayKey() {
        return new Date().toISOString().split("T")[0];
    }

    /* -----------------------------------
       START TIMER
    ----------------------------------- */
    function startTimer(type) {
        if (data.timers[type]) return;

        data.timers[type] = {
            start: Date.now()
        };
        saveData();
        alert(type + " timer started");
    }

    /* -----------------------------------
       STOP TIMER
    ----------------------------------- */
    function stopTimer(type) {
        const t = data.timers[type];
        if (!t) return;

        const duration = Math.floor((Date.now() - t.start) / 1000);
        data.timers[type] = null;

        // Auto log session
        logTime(type, duration);
        saveData();
        updateUI();
        alert(type + " timer stopped");
    }

    /* -----------------------------------
       LOG SESSION MANUALLY
    ----------------------------------- */
    function logTime(type, sec = null) {
        if (!sec) {
            const input = prompt("Minutes?", "30");
            if (!input) return;
            sec = parseInt(input) * 60;
        }

        data.sessions.push({
            type,
            sec,
            date: todayKey()
        });
        saveData();
        updateUI();
    }

    /* -----------------------------------
       DELETE LAST SESSION
    ----------------------------------- */
    function deleteLast(type) {
        for (let i = data.sessions.length - 1; i >= 0; i--) {
            if (data.sessions[i].type === type) {
                data.sessions.splice(i, 1);
                break;
            }
        }
        saveData();
        updateUI();
    }

    /* -----------------------------------
       CLEAR TODAY
    ----------------------------------- */
    function clearToday() {
        data.sessions = data.sessions.filter(s => s.date !== todayKey());
        saveData();
        updateUI();
        alert("Today cleared");
    }

    /* -----------------------------------
       NOTES
    ----------------------------------- */
    function saveNote() {
        const box = document.getElementById("noteBox");
        const note = box.value.trim();
        if (!note) return;

        const k = todayKey();
        if (!data.notes[k]) data.notes[k] = [];
        data.notes[k].push(note);

        box.value = "";
        saveData();
        renderNotes();
    }

    function renderNotes() {
        const list = document.getElementById("noteList");
        list.innerHTML = "";

        Object.keys(data.notes).reverse().forEach(day => {
            data.notes[day].forEach(n => {
                const div = document.createElement("div");
                div.className = "note-item";
                div.innerHTML = `<b>${day}</b><br>${n}`;
                list.appendChild(div);
            });
        });
    }

    /* -----------------------------------
       CHARTS
    ----------------------------------- */
    let pieChart, lineChart;

    function updateCharts() {
        const today = todayKey();
        let totals = { study: 0, project: 0, workout: 0, social: 0 };

        data.sessions.forEach(s => {
            if (s.date === today) totals[s.type] += s.sec;
        });

        // PIE CHART (Daily Distribution)
        if (pieChart) pieChart.destroy();
        pieChart = new Chart(document.getElementById("pieChart"), {
            type: "pie",
            data: {
                labels: ["Study", "Project", "Workout", "Social"],
                datasets: [{
                    data: [
                        totals.study / 3600,
                        totals.project / 3600,
                        totals.workout / 3600,
                        totals.social / 3600
                    ],
                    backgroundColor: ["#4c8bf5", "#34c759", "#ff9500", "#af52de"]
                }]
            }
        });

        // LINE CHART (Weekly)
        const days = [];
        const values = [];
        for (let i = 6; i >= 0; i--) {
            const d = new Date();
            d.setDate(d.getDate() - i);
            const k = d.toISOString().split("T")[0];
            days.push(k.substring(5));

            let sum = 0;
            data.sessions.forEach(s => {
                if (s.date === k) sum += s.sec;
            });
            values.push(sum / 3600);
        }

        if (lineChart) lineChart.destroy();
        lineChart = new Chart(document.getElementById("lineChart"), {
            type: "line",
            data: {
                labels: days,
                datasets: [{
                    label: "Hours",
                    data: values,
                    borderWidth: 2,
                    pointRadius: 3
                }]
            }
        });
    }

    /* -----------------------------------
       UPDATE UI
    ----------------------------------- */
    function updateUI() {
        const today = todayKey();
        let totals = { study: 0, project: 0, workout: 0, social: 0 };

        data.sessions.forEach(s => {
            if (s.date === today) totals[s.type] += s.sec;
        });

        document.getElementById("todayStudy").innerText = secondsToShort(totals.study);
        document.getElementById("todayProject").innerText = secondsToShort(totals.project);
        document.getElementById("todayWorkout").innerText = secondsToShort(totals.workout);
        document.getElementById("todaySocial").innerText = secondsToShort(totals.social);

        updateCharts();
        renderNotes();
    }

    /* -----------------------------------
       EVENT BINDINGS
    ----------------------------------- */
    document.querySelectorAll("[data-start]").forEach(btn =>
        btn.onclick = () => startTimer(btn.dataset.start)
    );

    document.querySelectorAll("[data-stop]").forEach(btn =>
        btn.onclick = () => stopTimer(btn.dataset.stop)
    );

    document.querySelectorAll("[data-log]").forEach(btn =>
        btn.onclick = () => logTime(btn.dataset.log)
    );

    document.querySelectorAll("[data-del]").forEach(btn =>
        btn.onclick = () => deleteLast(btn.dataset.del)
    );

    document.getElementById("clearToday").onclick = clearToday;
    document.getElementById("saveNote").onclick = saveNote;

    /* -----------------------------------
       INIT
    ----------------------------------- */
    updateUI();

});
                              </script>
  
